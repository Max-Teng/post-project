import{_ as u,f as m,o as p,c as f,a as t,m as v,p as _,n as b,v as g,t as h,j as i,u as w}from"./index-Bsitvbq3.js";import{p as y}from"./api-C2dT6Vnw.js";import{I as S}from"./ImageUploader-DVGNSmq7.js";const V={class:"create-post-page"},x={class:"container"},C={class:"post-form-card"},k={class:"form-layout"},B={class:"form-left"},E={class:"form-group"},U={class:"form-right"},I={class:"form-group"},P={class:"form-actions"},D=["disabled"],M={__name:"CreatePostView",setup(N){const n=w(),r=m(),e=i({content:"",image:""}),o=i(!1);async function c(){if(!(o.value||!e.value.content.trim())){o.value=!0;try{const a=await y.createPost(e.value);a.data.status==="SUCCESS"?(r.showSuccess(["貼文發布成功！"]),n.push("/")):r.showError(a.data.message||["發布失敗"])}catch{r.showError(["發布失敗，請稍後再試"])}finally{o.value=!1}}}function d(){n.push("/")}return(a,s)=>(p(),f("div",V,[t("div",x,[s[4]||(s[4]=t("div",{class:"page-header-section"},[t("h1",{class:"page-title"},"✏️ 新增貼文"),t("p",{class:"page-subtitle"},"分享你的想法")],-1)),t("div",C,[t("form",{onSubmit:v(c,["prevent"])},[t("div",k,[t("div",B,[t("div",E,[s[2]||(s[2]=t("label",{class:"form-label"},"貼文圖片",-1)),_(S,{modelValue:e.value.image,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value.image=l)},null,8,["modelValue"])])]),t("div",U,[t("div",I,[s[3]||(s[3]=t("label",{class:"form-label"},"貼文內容 *",-1)),b(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>e.value.content=l),class:"form-input form-textarea",placeholder:"寫下你想分享的內容...",rows:"10",required:""},null,512),[[g,e.value.content]])])])]),t("div",P,[t("button",{type:"button",class:"btn btn-secondary",onClick:d}," 取消 "),t("button",{type:"submit",class:"btn btn-primary",disabled:o.value||!e.value.content.trim()},h(o.value?"發文中...":"發布貼文"),9,D)])],32)])])]))}},A=u(M,[["__scopeId","data-v-9a0b23f5"]]);export{A as default};
