import{p as f}from"./api-C2dT6Vnw.js";import{_,u as y,o,c as n,a as t,t as m,b as g,d as k,e as b,f as C,g as S,h as $,i as h,F as w,r as x,j as v,k as N,w as V,l as A}from"./index-Bsitvbq3.js";const B={class:"post-header"},E=["src","alt"],I={class:"author-info"},P={class:"author-name"},F={class:"post-body"},T={key:0,class:"post-image-container"},j=["src","alt"],D={class:"post-content"},H="https://ui-avatars.com/api/?name=User&background=6366f1&color=fff",L={__name:"PostCard",props:{post:{type:Object,required:!0}},setup(a){const d=a,u=y(),c=k(()=>{const r=d.post.content||"";return r.length>100?r.substring(0,100)+"...":r});function l(){u.push(`/post/${d.post.id}`)}return(r,e)=>{var s,p,i;return o(),n("div",{class:"post-card",onClick:l},[t("div",B,[t("img",{src:((s=a.post.author)==null?void 0:s.coverImage)||H,alt:(p=a.post.author)==null?void 0:p.userName,class:"author-avatar"},null,8,E),t("div",I,[t("span",P,m(((i=a.post.author)==null?void 0:i.userName)||"åŒ¿åç”¨æˆ¶"),1)])]),t("div",F,[a.post.image?(o(),n("div",T,[t("img",{src:a.post.image,alt:a.post.content,class:"post-image"},null,8,j)])):g("",!0),t("p",D,m(c.value),1)]),e[0]||(e[0]=t("div",{class:"post-footer"},[t("span",{class:"read-more"},"é–±è®€æ›´å¤š â†’")],-1))])}}},U=_(L,[["__scopeId","data-v-cbb2d3c3"]]),q={class:"home-page"},M={class:"container"},O={class:"posts-header"},R={key:0,class:"loading-state"},z={key:1,class:"empty-state"},G={key:2,class:"posts-grid"},J={__name:"HomeView",setup(a){const d=b(),u=C(),c=v([]),l=v(!0);async function r(){l.value=!0;try{const e=await f.getAllPosts();e.data.status==="SUCCESS"?c.value=e.data.data||[]:u.showError(e.data.message||["è¼‰å…¥è²¼æ–‡å¤±æ•—"])}catch(e){console.error("Failed to fetch posts:",e),u.showError(["è¼‰å…¥è²¼æ–‡å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦"])}finally{l.value=!1}}return S(()=>{r()}),(e,s)=>{const p=N("router-link");return o(),n("div",q,[t("div",M,[s[4]||(s[4]=t("div",{class:"page-header-section"},[t("h1",{class:"page-title"},"ðŸ“ è²¼æ–‡ç‰†"),t("p",{class:"page-subtitle"},"æŽ¢ç´¢æœ€æ–°çš„è²¼æ–‡å‹•æ…‹")],-1)),t("div",O,[s[1]||(s[1]=t("h2",{class:"posts-title"},"æ‰€æœ‰è²¼æ–‡",-1)),$(d).isLoggedIn?(o(),h(p,{key:0,to:"/post/create",class:"btn btn-primary"},{default:V(()=>[...s[0]||(s[0]=[A(" âœï¸ æ–°å¢žè²¼æ–‡ ",-1)])]),_:1})):g("",!0)]),l.value?(o(),n("div",R,[...s[2]||(s[2]=[t("div",{class:"spinner"},null,-1),t("p",null,"è¼‰å…¥ä¸­...",-1)])])):c.value.length===0?(o(),n("div",z,[...s[3]||(s[3]=[t("div",{class:"empty-icon"},"ðŸ“­",-1),t("h3",null,"ç›®å‰æ²’æœ‰è²¼æ–‡",-1),t("p",null,"æˆç‚ºç¬¬ä¸€å€‹ç™¼æ–‡çš„äººå§ï¼",-1)])])):(o(),n("div",G,[(o(!0),n(w,null,x(c.value,i=>(o(),h(U,{key:i.id,post:i},null,8,["post"]))),128))]))])])}}},W=_(J,[["__scopeId","data-v-564600f9"]]);export{W as default};
