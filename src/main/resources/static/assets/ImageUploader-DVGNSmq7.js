import{f as y}from"./api-C2dT6Vnw.js";import{_ as I,j as c,f as w,o as u,c as i,a as e,b as d}from"./index-Bsitvbq3.js";const C={class:"image-uploader"},S={key:1,class:"upload-loading"},V={key:2,class:"image-preview"},b=["src"],x={__name:"ImageUploader",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(f,{emit:v}){const g=f,p=v,n=c(null),l=c(!1),t=c(g.modelValue),r=w();function _(){var s;(s=n.value)==null||s.click()}async function h(s){var m;const a=(m=s.target.files)==null?void 0:m[0];if(a){l.value=!0;try{const o=await y.upload(a);o.data.status==="SUCCESS"?(t.value=o.data.data,p("update:modelValue",o.data.data),r.showSuccess(["åœ–ç‰‡ä¸Šå‚³æˆåŠŸï¼"])):r.showError(o.data.message||["ä¸Šå‚³å¤±æ•—"])}catch{r.showError(["ä¸Šå‚³å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦"])}finally{l.value=!1}}}function k(){t.value="",p("update:modelValue",""),n.value&&(n.value.value="")}return(s,a)=>(u(),i("div",C,[e("input",{ref_key:"fileInput",ref:n,type:"file",accept:"image/*",class:"file-input",onChange:h},null,544),!t.value&&!l.value?(u(),i("div",{key:0,class:"upload-placeholder",onClick:_},[...a[0]||(a[0]=[e("div",{class:"upload-icon"},"ğŸ“·",-1),e("p",{class:"upload-text"},"é»æ“Šä¸Šå‚³åœ–ç‰‡",-1),e("p",{class:"upload-hint"},"æ”¯æ´ JPG, PNG, GIF",-1)])])):d("",!0),l.value?(u(),i("div",S,[...a[1]||(a[1]=[e("div",{class:"spinner"},null,-1),e("p",null,"ä¸Šå‚³ä¸­...",-1)])])):d("",!0),t.value&&!l.value?(u(),i("div",V,[e("img",{src:t.value,alt:"Preview",class:"preview-image"},null,8,b),e("button",{class:"remove-btn",onClick:k},"âœ•")])):d("",!0)]))}},B=I(x,[["__scopeId","data-v-3c7cb5df"]]);export{B as I};
